<div class="profile-container">
  <!-- Loading State -->
  <div class="loading-message" *ngIf="isLoading">
    <div class="loading-content">
      <i class="bi bi-hourglass-split"></i>
      <h3>Loading Profile...</h3>
      <p>Please wait while we fetch your profile information.</p>
    </div>
  </div>

  <!-- Error State -->
  <div class="error-overlay" *ngIf="!isLoading && errorMessage">
    <div class="error-card">
      <div class="error-header">
        <i class="bi bi-exclamation-triangle-fill error-icon"></i>
        <h3 class="error-title">Unable to Load Profile</h3>
      </div>
      <div class="error-body">
        <p class="error-description">
          We're experiencing issues loading your recruiter profile. This could be due to:
        </p>
        <ul class="error-reasons">
          <li>Network connectivity issues</li>
          <li>Authentication token expired</li>
          <li>Server temporarily unavailable</li>
          <li>Missing recruiter profile data</li>
        </ul>
        <div class="error-details">
          <strong>Technical Details:</strong> {{ errorMessage }}
        </div>
      </div>
      <div class="error-actions">
        <button class="retry-btn" (click)="reloadProfile()">
          <i class="bi bi-arrow-clockwise"></i> Try Again
        </button>
        <button class="logout-btn" (click)="logout()">
          <i class="bi bi-box-arrow-right"></i> Logout & Login Again
        </button>
        <button class="dismiss-btn" (click)="errorMessage = null">
          <i class="bi bi-x"></i> Dismiss
        </button>
      </div>
    </div>
  </div>

  <!-- Success/Error Messages -->
  <div class="message-container" *ngIf="!isLoading && (successMessage || errorMessage)">
    <div class="success-message" *ngIf="successMessage">
      <i class="bi bi-check-circle"></i>
      {{ successMessage }}
    </div>
    <div class="error-message" *ngIf="errorMessage && !isLoading">
      <i class="bi bi-exclamation-triangle"></i>
      {{ errorMessage }}
    </div>
  </div>

  <!-- Main Content -->
  <div *ngIf="!isLoading && !errorMessage">
  <!-- Page Header -->
  <div class="page-header">
    <div class="header-content">
      <h1 class="page-title">Recruiter <span class="highlight">Profile</span></h1>
      <p class="page-description">Manage your recruiter profile and company information.</p>
    </div>
    <button class="edit-profile-btn" (click)="toggleEditMode()" *ngIf="(activeTab === 'personal' || activeTab === 'company' || activeTab === 'stats') && !isEditMode">
      <span class="edit-icon">‚úè</span> Edit Profile
    </button>
    <div class="edit-actions" *ngIf="isEditMode">
      <button class="cancel-btn" (click)="cancelEdit()" [disabled]="isSaving">Cancel</button>
      <button class="save-btn" (click)="saveProfile()" [disabled]="isSaving">
        <span *ngIf="isSaving">Saving...</span>
        <span *ngIf="!isSaving">Save Changes</span>
      </button>
    </div>
  </div>

  <!-- Profile Header Card -->
  <div class="profile-header-card">
    <div class="profile-avatar-section">
      <div class="profile-avatar-large">{{ userProfile.initials }}</div>
      <div class="profile-header-info">
        <h2 class="profile-name">{{ userProfile.fullName }}</h2>
        <p class="profile-title">{{ userProfile.title }} ‚Ä¢ {{ userProfile.company }}</p>
        <div class="profile-meta">
          <span class="meta-item">
            <span class="icon">üè¢</span>
            {{ userProfile.company }}
          </span>
          <span class="meta-item">
            <span class="icon">‚úâ</span>
            {{ userProfile.email }}
          </span>
          <span class="meta-item" *ngIf="userProfile.memberSince">
            <span class="icon">üìÖ</span>
            {{ userProfile.memberSince }}
          </span>
        </div>
      </div>
    </div>

    <!-- Tab Navigation -->
    <div class="profile-tabs">
      <button 
        class="tab-button" 
        [class.active]="activeTab === 'personal'"
        (click)="setActiveTab('personal')">
        <span class="tab-icon">üë§</span>
        Personal Information
      </button>
      <button 
        class="tab-button" 
        [class.active]="activeTab === 'company'"
        (click)="setActiveTab('company')">
        <span class="tab-icon">üè¢</span>
        Company Information
      </button>
      <button 
        class="tab-button" 
        [class.active]="activeTab === 'stats'"
        (click)="setActiveTab('stats')">
        <span class="tab-icon">üìä</span>
        Recruitment Stats
      </button>
    </div>
  </div>

  <!-- Tab Content -->
  <div class="tab-content">
    
    <!-- Personal Information Tab -->
    <div class="tab-pane" *ngIf="activeTab === 'personal'">
      <div class="info-section">
        <div class="section-header">
          <span class="section-icon">üë§</span>
          <h3 class="section-title">Personal Information</h3>
        </div>

        <div class="info-grid">
          <!-- First Name -->
          <div class="info-item">
            <label class="info-label">First Name</label>
            <input 
              *ngIf="isEditMode" 
              type="text" 
              class="info-input" 
              [(ngModel)]="personalInfo.firstName">
            <p *ngIf="!isEditMode" class="info-value">{{ personalInfo.firstName }}</p>
          </div>

          <!-- Last Name -->
          <div class="info-item">
            <label class="info-label">Last Name</label>
            <input 
              *ngIf="isEditMode" 
              type="text" 
              class="info-input" 
              [(ngModel)]="personalInfo.lastName">
            <p *ngIf="!isEditMode" class="info-value">{{ personalInfo.lastName }}</p>
          </div>

          <!-- Email -->
          <div class="info-item">
            <label class="info-label">Email</label>
            <div class="info-value-with-icon">
              <span class="value-icon">‚úâ</span>
              <input 
                *ngIf="isEditMode" 
                type="email" 
                class="info-input" 
                [(ngModel)]="personalInfo.email">
              <p *ngIf="!isEditMode" class="info-value">{{ personalInfo.email }}</p>
            </div>
          </div>

          <!-- Phone -->
          <div class="info-item">
            <label class="info-label">Phone</label>
            <div class="info-value-with-icon">
              <span class="value-icon">üìû</span>
              <input 
                *ngIf="isEditMode" 
                type="tel" 
                class="info-input" 
                [(ngModel)]="personalInfo.phone">
              <p *ngIf="!isEditMode" class="info-value">{{ personalInfo.phone }}</p>
            </div>
          </div>

          <!-- Position -->
          <div class="info-item">
            <label class="info-label">Position</label>
            <div class="info-value-with-icon">
              <span class="value-icon">üíº</span>
              <input
                *ngIf="isEditMode"
                type="text"
                class="info-input"
                [(ngModel)]="personalInfo.position"
                placeholder="Enter your position">
              <p *ngIf="!isEditMode" class="info-value">{{ personalInfo.position }}</p>
            </div>
          </div>

          <!-- Department -->
          <div class="info-item">
            <label class="info-label">Department</label>
            <input
              *ngIf="isEditMode"
              type="text"
              class="info-input"
              [(ngModel)]="personalInfo.department"
              placeholder="Enter your department">
            <p *ngIf="!isEditMode" class="info-value">{{ personalInfo.department }}</p>
          </div>

          <!-- Join Date -->
          <div class="info-item">
            <label class="info-label">Join Date</label>
            <div class="info-value-with-icon">
              <span class="value-icon">üìÖ</span>
              <p class="info-value">{{ personalInfo.joinDate }}</p>
            </div>
          </div>

          <!-- Employee ID -->
          <div class="info-item">
            <label class="info-label">Employee ID</label>
            <p class="info-value">{{ personalInfo.employeeId }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Company Information Tab -->
    <div class="tab-pane" *ngIf="activeTab === 'company'">
      <div class="info-section">
        <div class="section-header">
          <span class="section-icon">üè¢</span>
          <h3 class="section-title">Company Information</h3>
        </div>

        <div class="company-main-info">
          <div class="company-header">
            <div class="company-icon">{{ companyInitials }}</div>
            <div>
              <input
                *ngIf="isEditMode"
                type="text"
                class="company-name-input"
                [(ngModel)]="companyInfo.name"
                placeholder="Company Name">
              <h4 *ngIf="!isEditMode" class="company-name">{{ companyInfo.name }}</h4>
            </div>
          </div>

          <div class="company-details-grid">
            <div class="company-detail-item">
              <span class="detail-icon">üåê</span>
              <div>
                <label class="detail-label">Website</label>
                <input
                  *ngIf="isEditMode"
                  type="url"
                  class="detail-input"
                  [(ngModel)]="companyInfo.website"
                  placeholder="https://example.com">
                <a *ngIf="!isEditMode" [href]="companyInfo.website" target="_blank" class="detail-link">
                  {{ companyInfo.website }}
                </a>
              </div>
            </div>

            <div class="company-detail-item">
              <span class="detail-icon">üìç</span>
              <div>
                <label class="detail-label">Headquarters</label>
                <input
                  *ngIf="isEditMode"
                  type="text"
                  class="detail-input"
                  [(ngModel)]="companyInfo.headquarters"
                  placeholder="City, State/Country">
                <p *ngIf="!isEditMode" class="detail-value">{{ companyInfo.headquarters }}</p>
              </div>
            </div>

            <div class="company-detail-item">
              <span class="detail-icon">üë•</span>
              <div>
                <label class="detail-label">Company Size</label>
                <input
                  *ngIf="isEditMode"
                  type="text"
                  class="detail-input"
                  [(ngModel)]="companyInfo.companySize"
                  placeholder="100-500 employees">
                <p *ngIf="!isEditMode" class="detail-value">{{ companyInfo.companySize }}</p>
              </div>
            </div>

            <div class="company-detail-item">
              <span class="detail-icon">üìù</span>
              <div>
                <label class="detail-label">Description</label>
                <textarea
                  *ngIf="isEditMode"
                  class="about-textarea"
                  [(ngModel)]="companyInfo.description"
                  placeholder="Brief description of your company..."
                  rows="3"></textarea>
                <p *ngIf="!isEditMode" class="detail-value">{{ companyInfo.description || 'No description provided' }}</p>
              </div>
            </div>

          </div>


        </div>


      </div>
    </div>

    <!-- Recruitment Statistics Tab -->
    <div class="tab-pane" *ngIf="activeTab === 'stats'">
      <div class="info-section">
        <div class="section-header">
          <span class="section-icon">üìä</span>
          <h3 class="section-title">Recruitment Statistics</h3>
        </div>

        <!-- Main Stats Cards -->
        <div class="stats-cards-grid">
          <div class="stat-card stat-card-green">
            <input
              *ngIf="isEditMode"
              type="number"
              class="stat-input"
              [(ngModel)]="recruitmentStats.totalHires"
              placeholder="0">
            <div *ngIf="!isEditMode" class="stat-number">{{ recruitmentStats.totalHires }}</div>
            <div class="stat-label">Total Hires</div>
          </div>

          <div class="stat-card stat-card-blue">
            <input
              *ngIf="isEditMode"
              type="number"
              class="stat-input"
              [(ngModel)]="recruitmentStats.activeJobs"
              placeholder="0">
            <div *ngIf="!isEditMode" class="stat-number">{{ recruitmentStats.activeJobs }}</div>
            <div class="stat-label">Active Jobs</div>
          </div>

          <div class="stat-card stat-card-orange">
            <input
              *ngIf="isEditMode"
              type="number"
              class="stat-input"
              [(ngModel)]="recruitmentStats.monthlyApplications"
              placeholder="0">
            <div *ngIf="!isEditMode" class="stat-number">{{ recruitmentStats.monthlyApplications }}</div>
            <div class="stat-label">Monthly Applications</div>
          </div>

          <div class="stat-card stat-card-purple">
            <input
              *ngIf="isEditMode"
              type="number"
              class="stat-input"
              [(ngModel)]="recruitmentStats.successRate"
              placeholder="0">
            <div *ngIf="!isEditMode" class="stat-number">{{ recruitmentStats.successRate }}%</div>
            <div class="stat-label">Success Rate</div>
          </div>
        </div>

        <!-- Performance Metrics -->
        <div class="performance-section">
          <h4 class="subsection-title">Performance Metrics</h4>
          <div class="metrics-grid">
            <div class="metric-item">
              <label class="metric-label">Average Time to Hire</label>
              <input
                *ngIf="isEditMode"
                type="number"
                class="metric-input"
                [(ngModel)]="recruitmentStats.avgTimeToHire"
                placeholder="0">
              <p *ngIf="!isEditMode" class="metric-value">{{ recruitmentStats.avgTimeToHire }} days</p>
            </div>

            <div class="metric-item">
              <label class="metric-label">Candidate Satisfaction</label>
              <input
                *ngIf="isEditMode"
                type="number"
                step="0.1"
                min="0"
                max="5"
                class="metric-input"
                [(ngModel)]="recruitmentStats.candidateSatisfaction"
                placeholder="0.0">
              <p *ngIf="!isEditMode" class="metric-value highlight-rating">{{ recruitmentStats.candidateSatisfaction }}/5</p>
            </div>
          </div>
        </div>

        <!-- This Month Section -->
        <div class="this-month-section">
          <h4 class="subsection-title">This Month</h4>
          <div class="monthly-stats">
            <div class="monthly-stat-item">
              <label class="monthly-label">New Hires</label>
              <input
                *ngIf="isEditMode"
                type="number"
                class="monthly-input"
                [(ngModel)]="recruitmentStats.newHires"
                placeholder="0">
              <p *ngIf="!isEditMode" class="monthly-value">{{ recruitmentStats.newHires }}</p>
            </div>

            <div class="monthly-stat-item">
              <label class="monthly-label">Interview Scheduled</label>
              <input
                *ngIf="isEditMode"
                type="number"
                class="monthly-input"
                [(ngModel)]="recruitmentStats.interviewsScheduled"
                placeholder="0">
              <p *ngIf="!isEditMode" class="monthly-value">{{ recruitmentStats.interviewsScheduled }}</p>
            </div>

            <div class="monthly-stat-item">
              <label class="monthly-label">Offers Extended</label>
              <input
                *ngIf="isEditMode"
                type="number"
                class="monthly-input"
                [(ngModel)]="recruitmentStats.offersExtended"
                placeholder="0">
              <p *ngIf="!isEditMode" class="monthly-value">{{ recruitmentStats.offersExtended }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
  </div>
</div>
