<div class="find-candidates-container">
  <!-- Page Header -->
  <div class="page-header">
    <div class="header-icon">
      <span class="icon-circle">â—‹</span>
    </div>
    <div class="header-content">
      <h1 class="page-title">Find <span class="highlight">Candidates</span></h1>
      <p class="page-description">Search and discover talented candidates based on skills, experience, and location.</p>
    </div>
  </div>

  <!-- Search and Filter Section -->
  <div class="search-filter-section">
    <div class="search-box">
      <span class="search-icon">ğŸ”</span>
      <input
        type="text"
        placeholder="Search candidates, skills, or job titles..."
        class="search-input"
        [(ngModel)]="searchQuery"
        (input)="onSearch()"
        (keyup.enter)="onSearch()">
    </div>

    <button class="filters-btn" (click)="toggleFilters()">
      <span class="filter-icon" [class.rotated]="showFilters">â–¼</span> Filters
    </button>

    <button
      class="view-toggle grid-view"
      [class.active]="viewMode === 'grid'"
      (click)="setViewMode('grid')">
      <span class="grid-icon">âŠ</span>
    </button>

    <button
      class="view-toggle list-view"
      [class.active]="viewMode === 'list'"
      (click)="setViewMode('list')">
      <span class="list-icon">â˜°</span>
    </button>


  </div>

  <!-- Filter Panel -->
  <div class="filter-panel" *ngIf="showFilters">
    <div class="filter-row">
      <div class="filter-group">
        <label class="filter-label">Status</label>
        <select class="filter-select" [(ngModel)]="statusFilter" (change)="applyFilters()">
          <option value="">All Status</option>
          <option value="available">Available</option>
          <option value="employed">Employed</option>
          <option value="not-looking">Not Looking</option>
        </select>
      </div>

      <div class="filter-group">
        <label class="filter-label">Experience</label>
        <select class="filter-select" [(ngModel)]="experienceFilter" (change)="applyFilters()">
          <option value="">All Experience</option>
          <option value="entry">Entry Level (0-2 years)</option>
          <option value="mid">Mid Level (3-5 years)</option>
          <option value="senior">Senior Level (6+ years)</option>
        </select>
      </div>

      <div class="filter-group">
        <label class="filter-label">Location</label>
        <input
          type="text"
          class="filter-input"
          placeholder="Enter location..."
          [(ngModel)]="locationFilter"
          (input)="applyFilters()">
      </div>

      <div class="filter-actions">
        <button class="clear-filters-btn" (click)="clearFilters()">Clear All</button>
        <button class="apply-filters-btn" (click)="applyFilters()">Apply Filters</button>
      </div>
    </div>
  </div>

  <!-- Results Count -->
  <div class="results-info">
    <p>Found <strong>{{ filteredCandidates.length }}</strong> candidates</p>
  </div>

  <!-- Grid View -->
  <div class="candidates-grid" *ngIf="viewMode === 'grid'">
    <div class="candidate-card" *ngFor="let candidate of filteredCandidates">
      <div class="card-header">
        <div class="avatar" [ngClass]="candidate.avatarColor">{{ candidate.avatarLetter }}</div>
        <div class="candidate-info">
          <h3 class="candidate-name">{{ candidate.name }}</h3>
          <p class="candidate-role">{{ candidate.role }}</p>
        </div>
        <button class="bookmark-btn" (click)="toggleBookmark(candidate.id)">â˜…</button>
      </div>
      
      <div class="card-details">
        <div class="detail-item">
          <span class="icon">ğŸ“</span>
          <span>{{ candidate.location }}</span>
        </div>
        <div class="detail-item">
          <span class="icon">ğŸ’¼</span>
          <span>{{ candidate.experience }}</span>
        </div>
      </div>
      
      <div class="skills-section">
        <p class="skills-label">Skills</p>
        <div class="skills-tags">
          <span 
            class="skill-tag" 
            *ngFor="let skill of candidate.skills.slice(0, 4)"
            [ngClass]="getSkillTagClass(skill)">
            {{ skill }}
          </span>
          <span class="skill-more" *ngIf="candidate.extraSkillsCount > 0">
            +{{ candidate.extraSkillsCount }} more
          </span>
        </div>
      </div>
      
      <div class="card-footer">
        <div class="education">
          <span class="icon">ğŸ“</span>
          <span>{{ candidate.education }}</span>
        </div>
        <div class="applied-date">
          <span class="icon">ğŸ“…</span>
          <span>Applied: {{ candidate.appliedDate | date:'mediumDate' }}</span>
        </div>
      </div>
      
      <div class="card-actions">
        <button class="view-profile-btn" (click)="viewProfile(candidate.id)">
          <span>ğŸ‘</span> View Profile
        </button>
        <button class="contact-btn" (click)="contactCandidate(candidate.id)">
          <span>âœ‰</span> Contact
        </button>
      </div>
      
      <span class="status-badge" [ngClass]="candidate.status">
        {{ getStatusText(candidate.status) }}
      </span>
    </div>
  </div>

  <!-- List View -->
  <div class="candidates-list" *ngIf="viewMode === 'list'">
    <div class="candidate-list-item" *ngFor="let candidate of filteredCandidates">
      <div class="list-item-left">
        <div class="avatar" [ngClass]="candidate.avatarColor">{{ candidate.avatarLetter }}</div>
        <div class="list-candidate-info">
          <div class="list-header">
            <h3 class="candidate-name">{{ candidate.name }}</h3>
            <span class="status-badge-inline" [ngClass]="candidate.status">
              {{ getStatusText(candidate.status) }}
            </span>
          </div>
          <p class="candidate-role">{{ candidate.role }}</p>
          <div class="list-details">
            <span class="detail-item">
              <span class="icon">ğŸ“</span>
              {{ candidate.location }}
            </span>
            <span class="detail-item">
              <span class="icon">ğŸ’¼</span>
              {{ candidate.experience }}
            </span>
            <span class="detail-item">
              <span class="icon">ğŸ“</span>
              {{ candidate.education }}
            </span>
            <span class="detail-item">
              <span class="icon">ğŸ“…</span>
              Applied: {{ candidate.appliedDate | date:'mediumDate' }}
            </span>
          </div>
          <div class="skills-tags">
            <span 
              class="skill-tag" 
              *ngFor="let skill of candidate.skills.slice(0, 4)"
              [ngClass]="getSkillTagClass(skill)">
              {{ skill }}
            </span>
            <span class="skill-more" *ngIf="candidate.extraSkillsCount > 0">
              +{{ candidate.extraSkillsCount }} more
            </span>
          </div>
        </div>
      </div>
      <div class="list-item-actions">
        <button class="bookmark-btn" (click)="toggleBookmark(candidate.id)">â˜…</button>
        <button class="view-profile-btn" (click)="viewProfile(candidate.id)">
          <span>ğŸ‘</span> View Profile
        </button>
        <button class="contact-btn" (click)="contactCandidate(candidate.id)">
          <span>âœ‰</span> Contact
        </button>
      </div>
    </div>
  </div>
</div>



<!-- Profile View Modal -->
<div class="modal-overlay" *ngIf="showProfileModal && selectedCandidate" (click)="closeProfileModal()">
  <div class="modal-content profile-modal" (click)="$event.stopPropagation()">
    <button class="close-btn" (click)="closeProfileModal()">Ã—</button>
    
    <div class="profile-header">
      <div class="profile-avatar-section">
        <div class="profile-avatar" [ngClass]="selectedCandidate.avatarColor">
          {{ selectedCandidate.avatarLetter }}
        </div>
      </div>
      <div class="profile-info">
        <h2>{{ selectedCandidate.name }}</h2>
        <p class="profile-role">{{ selectedCandidate.role }}</p>
        <p class="profile-email">{{ selectedCandidate.email }}</p>
      </div>
      <div class="profile-status">
        <span class="status-badge-large" [ngClass]="selectedCandidate.status">
          {{ getStatusText(selectedCandidate.status) }}
        </span>
        <p class="profile-views">Applied: {{ selectedCandidate.appliedDate | date:'mediumDate' }}</p>
        <p class="last-active">Application ID: {{ selectedCandidate.applicationID }}</p>
      </div>
    </div>

    <div class="profile-details-grid">
      <div class="profile-detail-item">
        <span class="icon">ğŸ“</span>
        <span>{{ selectedCandidate.location }}</span>
      </div>
      <div class="profile-detail-item">
        <span class="icon">ğŸ’¼</span>
        <span>{{ selectedCandidate.experience }} experience</span>
      </div>
      <div class="profile-detail-item" *ngIf="selectedCandidate.degree">
        <span class="icon">ğŸ“</span>
        <span>{{ selectedCandidate.degree }}</span>
      </div>
    </div>

    <div class="profile-section">
      <h3>Skills</h3>
      <div class="skills-tags">
        <span 
          class="skill-tag" 
          *ngFor="let skill of selectedCandidate.skills"
          [ngClass]="getSkillTagClass(skill)">
          {{ skill }}
        </span>
      </div>
    </div>

    <div class="profile-section">
      <h3>Work Experience</h3>
      <div class="work-experience-list">
        <div class="work-item" *ngFor="let work of selectedCandidate.workExperience">
          <p class="work-position">{{ work.position }}</p>
        </div>
      </div>
    </div>

    <div class="profile-actions">
      <button class="send-message-btn" (click)="contactCandidate(selectedCandidate.id)">
        <span>âœ‰</span> Send Message
      </button>
      <button class="close-modal-btn" (click)="closeProfileModal()">Close</button>
    </div>
  </div>
</div>
